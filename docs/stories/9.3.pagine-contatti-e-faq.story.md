---
status: drafted
priority: medium
estimate: S
story_id: "9.3"
epic: "Epic 9 - Vetrina Pubblica e Lead Capture"
---

# Story 9.3: Pagine Contatti e FAQ

**As a** Visitor, **I want** contact and FAQ pages, **so that** I can clarify doubts before submitting a request.

## Acceptance Criteria

### AC-1
_Derived from epic-details AC-1._
**Given** public contact config contains `phone="+39 02 1234 5678"`, `email="info@centrotest.it"`, `openingHours="Lun-Ven 09:00-18:30; Sab 09:00-13:00"`, and `mapPlaceholder="MAP_EMBED_PENDING"`
**When** an anonymous visitor opens `/contatti`
**Then** the page renders a clickable `tel:+390212345678`, a clickable `mailto:info@centrotest.it`, the exact opening-hours string `Lun-Ven 09:00-18:30; Sab 09:00-13:00`, and a map placeholder block with visible text `Mappa in aggiornamento`

### AC-2
_Derived from epic-details AC-2._
**Given** FAQ public data contains categories `Accettazione` and `Preventivi` with entries `("Quanto dura una diagnosi?", "24-48 ore")` and `("Il preventivo e gratuito?", "Si, salvo guasti non standard")`
**When** an anonymous visitor opens `/faq`
**Then** the page shows category headers `Accettazione` and `Preventivi`, renders both question labels, and expanding `Il preventivo e gratuito?` reveals exactly `Si, salvo guasti non standard`

### AC-3
_Derived from epic-details AC-3._
**Given** backoffice/public config is updated from `phone="+39 02 1234 5678"` to `phone="+39 02 7654 3210"` and FAQ answer `Il preventivo e gratuito?` is changed to `Si, sempre`, and public endpoints return those updated values
**When** an anonymous visitor performs a full page reload for `/contatti` and `/faq`
**Then** `/contatti` shows `+39 02 7654 3210` and `/faq` shows answer `Si, sempre`, without any frontend code change between the two reads

### AC-4
_Derived from epic-details AC-4._
**Given** the visitor starts on `/`, sees links `Servizi`, `FAQ`, `Contatti`, and reaches `/faq` from the `FAQ` link
**When** the visitor clicks breadcrumb `Home`
**Then** the URL returns to `/`, the FAQ view had shown breadcrumb `Home / FAQ` with title `FAQ`, and home title is `Riparazioni rapide e trasparenti`

### AC-5
_Validation hardening: sad path required by step-04 quality checks._
**Given** an anonymous visitor requests `GET /api/public/pages/slug-non-supportato`
**When** the backend handles `/api/public/pages/:slug` with an unsupported slug
**Then** the API responds with HTTP `404` and `error.code="PAGE_NOT_FOUND"` using standard `buildErrorResponse` shape

## Target Modules

- `packages/frontend/src/App.tsx`
- `packages/frontend/src/__tests__/public-home-vetrina.atdd.spec.ts`
- `packages/backend/src/routes/public.ts`
- `packages/backend/src/services/anagrafiche-service.ts`
- `packages/backend/src/__tests__/public-services-api.atdd.spec.ts`

## Task Breakdown

- [x] Task 1 (AC-1, AC-4): extend route handling and view rendering in `packages/frontend/src/App.tsx` for `/contatti` and `/faq`, preserving current `/servizi/:slug` behavior.
- [x] Task 2 (AC-1, AC-3, AC-5): add endpoint handler `GET /api/public/pages/:slug` in `packages/backend/src/routes/public.ts` with deterministic 404 `PAGE_NOT_FOUND` for unsupported slugs and standard error payload mapping.
- [x] Task 3 (AC-2, AC-3): add endpoint handler `GET /api/public/faq` in `packages/backend/src/routes/public.ts` with category-grouped payload from `packages/backend/src/services/anagrafiche-service.ts`.
- [x] Task 4 (AC-1, AC-2, AC-4): implement contact sections (telefono/email/orari/mappa placeholder), FAQ grouped accordion, breadcrumb, and page-title consistency in `packages/frontend/src/App.tsx`.
- [x] Task 5 (AC-1, AC-2, AC-3): implement service methods in `packages/backend/src/services/anagrafiche-service.ts` that read contact/FAQ data from public config and return stable payload shapes.
- [x] Task 6 (AC-1, AC-2, AC-3, AC-4): extend frontend ATDD in `packages/frontend/src/__tests__/public-home-vetrina.atdd.spec.ts` for contacts/FAQ rendering and `/ -> /faq -> /` consistency.
- [x] Task 7 (AC-2, AC-3, AC-5): extend backend ATDD in `packages/backend/src/__tests__/public-services-api.atdd.spec.ts` for FAQ payload and unsupported-page 404 behavior.
